(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1363:function(e,t,s){"use strict";s(4);var a=s(15);s(16);t.a=class{subscribeWithApi(e){return(new a.a).post("/profile/subscribe",e).then(e=>Promise.resolve(e.data)).catch(e=>Promise.reject(e.response))}}},1364:function(e,t,s){"use strict";var a=s(89),i=s(118),r=s(16),n=s.n(r);t.a=class{static push(e,t){n.a.divolte&&a.a.doDataPush(e,t)}static subscribe(e){const t={userUUID:i.a.create_UUID(),email:e.email,language:e.language};this.push("subscribeNewsletter",{identity:t})}static newsletter(e){const t={userUUID:i.a.create_UUID(),email:e.email,language:e.preferredLanguage.toUpperCase(),country:e.countryOfResidence.toUpperCase()};this.push("subscribeNewsletter",{identity:t})}}},1971:function(e,t,s){"use strict";var a=class{static alreadySubscribedResponse(){return"snippetTemplate.alreadySubscribed.alreadySubscribedDescription"}static validateEmail(e){e.$touch();const t=[];return e.required?e.email||t.push("header.loginForm.email.errors.invalidEmail"):t.push("header.loginForm.email.errors.missingEmail"),t}},i=s(1363),r=s(1364),n=(s(4),s(20),s(9),s(10),s(454),s(636),s(455),s(456),s(6)),c=s.n(n),o=s(19),u=s(16),l=s.n(u),h=s(54),d=s.n(h),p=s(72);var m=s(21);const b={ALREADY_SUBSCRIBED:a.alreadySubscribedResponse()},g={methods:{onChange(){this.formErrors=a.validateEmail(this.$v.email)},onInput(){this.$v&&this.$v.email.$touch(),this.formErrors.length&&(this.formErrors=a.validateEmail(this.$v.email))},subscribeWithApi(){if(this.formErrors=a.validateEmail(this.$v.email),this.formErrors.length)return!1;const e={email:this.email,subscribeSource:this.subscribeSource,language:this.selectedLang.toUpperCase()};"ZZ"!==this.selectedCountry.toUpperCase()&&(e.country=this.selectedCountry.toUpperCase()),(new i.a).subscribeWithApi(e).then(t=>{"SUCCESS"===t.message&&(r.a.subscribe(e),class{static async getIP(){try{return(await d.a.get("https://api.ipify.org/?format=json")).data.ip}catch(e){return""}}static doDataPush(e){if(o.a.getCookie("gdpr_settings").split(",").filter(e=>"adv"===e).length>0)return!1;let t=c()().unix();Promise.all([this.digestMessage(e.email),this.getIP()]).then(e=>{const s={data:[{event_name:"Subscribe",event_time:t,action_source:"website",event_id:t,event_source_url:window.location.pathname,user_data:{em:[e[0]],client_ip_address:e[1],client_user_agent:navigator.userAgent},custom_data:{content_category:"newsletter - submit",content_name:window.location.pathname}}]};this.sendData(s)}).catch(e=>p.a(e))}static async sendData(e){d.a.post("https://graph.facebook.com/v13.0/".concat(l.a.fb_pixel_id,"/events?access_token=").concat(l.a.fb_access_token),e).catch(e=>p.a(e))}static async digestMessage(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")}}.doDataPush(this.email),this.successAction())}).catch(t=>{p.a(t),this.formErrors=[m.a.getErrorTranslationKey(b,t)],r.a.subscribe(e)})},successAction(){window.location=this.subscribedRedirectURL}}};t.a=g}}]);
//# sourceMappingURL=76.js.map