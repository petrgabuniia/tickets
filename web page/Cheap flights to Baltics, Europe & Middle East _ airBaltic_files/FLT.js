(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1292:function(e,t,o){"use strict";o(4),o(9),o(10),o(446),o(274),o(20);var r=o(155),i=o.n(r),s=o(272),a=o(1278),n=o(6),c=o.n(n),l=o(1308),h=o(89),d=o(16),p=o.n(d);const m={computed:{getGroupBookingUrl(){const e=this.$store.state.eHorizonSearchForm.tripType,t=i.a.stringify({fromCode:this.$store.state.eHorizonSearchForm.origin.value.code,fromType:this.$store.state.eHorizonSearchForm.origin.value.type,toCode:this.$store.state.eHorizonSearchForm.destin.value.code,toType:this.$store.state.eHorizonSearchForm.destin.value.type,tripType:e,numberOfAdults:this.$store.state.eHorizonSearchForm.paxSelector.adults,numberOfChildren:this.$store.state.eHorizonSearchForm.paxSelector.children,numberOfInfants:this.$store.state.eHorizonSearchForm.paxSelector.infants});let o=this.$store.state.eHorizonSearchForm.groupBookingUrl;return"desktop"!==this.$store.state.device.deviceType&&this.$store.state.eHorizonSearchForm.groupBookingFormUrl&&(o=this.$store.state.eHorizonSearchForm.groupBookingFormUrl),o+"?".concat(t)}},mixins:[a.a],methods:{originClose(){this.$store.dispatch("eHorizonSearchForm/origin/closeTypeahead")},destinClose(){this.$store.dispatch("eHorizonSearchForm/destin/closeTypeahead")},paxSelectorClose(){this.closePaxSelector()},redirectToGroupBooking(){window.open(this.getGroupBookingUrl,"_self")},focusOnInvalidFields(){"mobile"!==this.$store.state.device.deviceType&&(this.$store.getters["eHorizonSearchForm/origin/$v"].$invalid&&this.$refs.origin?(this.$refs.origin.focus(),s.a.fsfError("Validation","Missing origin")):this.$store.getters["eHorizonSearchForm/destin/$v"].$invalid&&this.$refs.destin?(this.$refs.destin.focus(),s.a.fsfError("Validation","Missing destin")):this.$store.getters["eHorizonSearchForm/promoCodes/$v"].$invalid&&this.$refs.promoCode&&(this.$refs.promoCode.openPromoModalEvent(),s.a.fsfError("Validation","Invalid vouchers")))},saveSearchInRecentSearches(){const e="return"===this.$store.state.eHorizonSearchForm.tripType?2:1,t={fromCode:this.$store.state.eHorizonSearchForm.origin.value.code,fromType:this.$store.state.eHorizonSearchForm.origin.value.type,toCode:this.$store.state.eHorizonSearchForm.destin.value.code,toType:this.$store.state.eHorizonSearchForm.destin.value.type,tripType:e,adults:this.$store.state.eHorizonSearchForm.paxSelector.adults,children:this.$store.state.eHorizonSearchForm.paxSelector.children,infants:this.$store.state.eHorizonSearchForm.paxSelector.infants,youngAdults:this.$store.state.eHorizonSearchForm.paxSelector.youngAdults,departure:"",return:"",promoCodes:this.$store.state.eHorizonSearchForm.promoCodes.promoCodes,price:""};this.addSearchToCookie(t)},submitForm(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.dispatch("eHorizonSearchForm/validateComponents").then(()=>{this.$store.state.eHorizonSearchForm.formValid?(this.$store.commit("main/showPlaneLoader",!0),e?(this.setHistoryToFsfOverlay(),s.a.flightSearchOverlay("flight_search",this.$store.state.eHorizonSearchForm),this.sendInsiderData()):s.a.flightSearch("flight_search",this.$store.state.eHorizonSearchForm),this.$store.state.eHorizonSearchForm.paxSelector.groupBooking?this.redirectToGroupBooking():(this.saveSearchInRecentSearches(),setTimeout(()=>{this.$refs.searchForm.submit()},100))):this.focusOnInvalidFields()})},sendDivolteData(){const e=this.$store.state.eHorizonSearchForm;let t={search:{origin:e.origin.value.code,destination:e.destin.value.code,tripType:"return"===e.tripType?"RT":"OW",outboundDate:e.calendar.departureDate,inboundDate:e.calendar.returnDate,adults:e.paxSelector.adults,children:e.paxSelector.children,infants:e.paxSelector.infants}};h.a.doDataPush("searchDateSelectionTryme",t)},async sendInsiderData(){if(!l.a.insiderExists())return;const e=this.$store.state.eHorizonSearchForm;let t=await this.imgUrlExists(e.destin.value.code),o={title:"events",name:"btsearch",params:{search_time:c()().utc().format(),search_oac:e.origin.value.code,search_dac:e.destin.value.code,search_origin_flight_name:e.origin.value.apt,search_destination_flight_name:e.destin.value.apt,search_departure_date:e.calendar.departureDate?c()(e.calendar.departureDate).utc().format():null,search_return_date:e.calendar.returnDate?c()(e.calendar.returnDate).utc().format():null,search_noa:e.paxSelector.adults,search_noc:e.paxSelector.children,search_noi:e.paxSelector.infants,search_price:e.selectedFlightPrice.price?e.selectedFlightPrice.price+"Â·"+e.selectedFlightPrice.decimal:null,search_trip_type:"return"===e.tripType?"RT":"OW",saerch_url:this.$_fsfMixin_createDeeplink(!0),bt_image_url:t}};l.a.track(o)},async imgUrlExists(e){let t="".concat(p.a.btTranslationsUrl,"hot_deals/insider-destination-images/");const o=t+"generic.jpg";if(!e)return o;let r=t+"".concat(e.toLowerCase(),".jpg");try{return(await fetch(r,{method:"HEAD"})).ok?r:o}catch(e){return o}},setHistoryToFsfOverlay(){const e=new URL(window.location.href);e.search="?opentab=OVL",window.history.replaceState(null,null,e)},submitClpForm(){this.$store.dispatch("eHorizonSearchForm/validateComponents").then(()=>{this.$store.state.eHorizonSearchForm.formValid?(this.$store.commit("main/showPlaneLoader",!0),this.$store.state.eHorizonSearchForm.paxSelector.groupBooking?this.redirectToGroupBooking():this.$refs.searchForm.submit()):this.focusOnInvalidFields()})}}};t.a=m},1308:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var r=o(19),i=o(2);class s{static track(e){Insider.track(e.title,[{event_name:e.name,event_params:{custom:e.params}}])}static insiderObject(e){let t=r.a.getCookie("_dvp")||null;window.insider_object={user:{uuid:t,gdpr_optin:!0,language:i.default.i18n.locale(),custom:e}}}static insiderExists(){return null!==document.getElementById("insider-worker")}}},1310:function(e,t,o){"use strict";o(4);var r=o(15),i=o(7);t.a=class{convertData(e){return Object(i.a)(e,"data",[])}getHistogramData(e,t){return(new r.a).get("/2e/offers/".concat(e,"/").concat(t)).then(e=>Promise.resolve(this.convertData(e))).catch(e=>Promise.reject(e))}}},1331:function(e,t,o){"use strict";var r=o(73),i=o(2);t.a=class{static push(e){r.a.doDataLayerPush(e)}static clickOnVoucherLink(){this.push({event:"GAevent",eventCategory:"Frontpage",eventAction:"Flight Search Form",eventLabel:"C:voucher; A:open; Lang: "+i.default.i18n.locale(),nonInteraction:0})}static voucherAdded(e){this.push({event:"GAevent",eventCategory:"Frontpage",eventAction:"Flight Search Form",eventLabel:"C:voucher; A:applied; Code: "+e+"; Lang: "+i.default.i18n.locale(),nonInteraction:0})}}},1348:function(e,t,o){"use strict";var r=o(1331);const i={mixins:[o(1271).a],methods:{showPromoCodeBlock(){r.a.clickOnVoucherLink(),this.$store.dispatch("eHorizonSearchForm/promoCodes/toggleBlock",!0)},openPromoModal(){this.$store.commit("eHorizonSearchForm/promoCodes/showDropdown",!0),this.$store.commit("eHorizonSearchForm/promoCodes/setInvalid",!0)},closePromoModal(){this.$store.commit("eHorizonSearchForm/promoCodes/showDropdown",!1)},closeAndHidePromoModal(){this.$store.commit("eHorizonSearchForm/promoCodes/showDropdown",!1),this.$store.dispatch("eHorizonSearchForm/promoCodes/toggleBlock",!1)},onPromoCodeAdded(){this.$store.commit("eHorizonSearchForm/promoCodes/add")},onPromoCodeUpdated(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$store.commit("eHorizonSearchForm/promoCodes/update",{index:e,code:t,error:""}),o&&this.$_searchSessionStorageMixin_updateVoucherSessionStorage()},onPromoCodeRemoved(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.commit("eHorizonSearchForm/promoCodes/remove",e),t&&this.$_searchSessionStorageMixin_updateVoucherSessionStorage(),this.$store.dispatch("eHorizonSearchForm/promoCodes/validateForm")}}};t.a=i},1366:function(e,t,o){},1404:function(e,t,o){"use strict";o(1366)},1430:function(e,t,o){"use strict";var r=o(13);function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a={computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(r.e)("indexTabs",["activeTab"])),methods:{switchTab(e){this.$store.commit("indexTabs/setActiveTab",e)}}},n=(o(1404),o(11)),c=Object(n.a)(a,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"switch-wrap"},[o("div",{staticClass:"switch",class:{active:"FLT"===e.activeTab},on:{click:function(t){return e.switchTab("FLT")}}},[e._v("\n    "+e._s(e.$t("reusable.flight"))+"\n  ")]),e._v(" "),o("div",{staticClass:"switch",class:{active:"HTL"===e.activeTab},on:{click:function(t){return e.switchTab("HTL")}}},[e._v("\n    "+e._s(e.$t("indexTabs.eHorizon.htlTabLabel"))+"\n  ")])])}),[],!1,null,"3648a524",null);t.a=c.exports},1545:function(e,t,o){},2079:function(e,t,o){"use strict";o(1545)},2668:function(e,t,o){"use strict";o.r(t);o(9),o(4),o(10);var r=o(7),i=o(1348),s=o(1278),a=o(1292),n=o(1269),c=o(1354),l=(o(1310),o(13)),h=o(272),d=o(1430),p=o(458);function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){g(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f={name:"FLT",directives:{Focusout:n.a},components:{FsfHtlSwitch:d.a,Glass:c.a,Histogram:()=>Promise.all([o.e(0),o.e(244)]).then(o.bind(null,1427)),RipBlock:()=>o.e(349).then(o.bind(null,2745)),FlightSearchForm:()=>Promise.all([o.e(0),o.e(1),o.e(11),o.e(19),o.e(200)]).then(o.bind(null,2746)),FlightSearch:()=>Promise.all([o.e(0),o.e(11),o.e(30),o.e(51),o.e(194)]).then(o.bind(null,2747)),"close-icon":()=>Promise.resolve().then(o.bind(null,275))},mixins:[i.a,a.a,s.a],props:{rip:{type:Boolean,required:!1,default:!1},ripTexts:{type:Object,required:!1,default:()=>({})},banners:{type:Object,required:!0,default:()=>({title:"",description:""})}},data:()=>({histogramPrices:[]}),computed:u(u(u(u({},Object(l.e)("eHorizonSearchForm",["paxSelector","tripType","destin","origin","promoCodes","minimized","directFlights","directFlightsRoundTrip","recentSearch","sref","showHistogram"])),Object(l.e)("device",["deviceType"])),Object(l.c)("device",["isMobile","isTablet","isDesktop"])),{},{origDestin(){return{origin:Object(r.a)(this.origin,"value.code",null),destin:Object(r.a)(this.destin,"value.code",null)}},isABTestNewVersion:()=>p.a.isNewVersionEnabled(),getHistogramSize(){return this.isMobile?55:this.isTablet?80:120},showHistogramBlock(){return this.showHistogram&&!this.isOpenItems},isOpenItems(){return!!this.isMobile&&(this.paxSelector.dropdown.open||this.promoCodes.dropdown.open)}}),mounted(){document.body.setAttribute("tabindex",-1)},methods:{closeHistogram(){this.$store.commit("eHorizonSearchForm/setShowHistogram",!1)},closeOverlay(){this.isOverlayVisible()&&(this.paxSelector.dropdown.open&&this.paxSelectorClose(),this.promoCodes.dropdown.open&&this.closePromoModal(),this.origin.typeahead.open&&this.originCloseAll(),this.destin.typeahead.open&&this.destinCloseAll())},isOverlayVisible(){return this.isTablet&&(this.paxSelector.dropdown.open||this.promoCodes.dropdown.open||this.origin.typeahead.open||this.destin.typeahead.open)},histogramSearch(e){const t="return"===this.tripType?2:1,o={fromCode:this.origin.value.code,fromType:this.origin.value.type,toCode:this.destin.value.code,toType:this.destin.value.type,tripType:t,adults:this.paxSelector.adults,children:this.paxSelector.children,infants:this.paxSelector.infants,departure:"",return:"",promoCodes:this.promoCodes.promoCodes,price:""};this.addSearchToCookie(o),h.a.flightSearch("flight_search_calendar",o)}}},v=(o(2079),o(11)),S=Object(v.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:["content-wrap",{fixed:e.isOpenItems}]},[o("glass",{staticClass:"fsf-glass",class:{active:e.destin.typeahead.open||e.origin.typeahead.open}},[e.isMobile&&!e.isABTestNewVersion?o("h1",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.banners.title,expression:"banners.title"}],staticClass:"form-title"}):o("fsf-htl-switch"),e._v(" "),e.rip?[o("rip-block",{attrs:{texts:e.ripTexts}})]:[e.isABTestNewVersion?o("flight-search"):o("flight-search-form")]],2),e._v(" "),!e.isABTestNewVersion&&e.showHistogramBlock?o("glass",{staticClass:"histogram-glass"},[o("section",{staticClass:"histogram-wrapper"},[o("div",{staticClass:"histogram-header"},[o("h2",{attrs:{id:"histogram-title"}},[e._v(e._s(e.$t("searchForm.histogram.indexTitle")))]),e._v(" "),o("close-icon",{on:{click:e.closeHistogram}})],1),e._v(" "),o("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.$t("searchForm.histogram.disclaimer"),expression:"$t('searchForm.histogram.disclaimer')"}],staticClass:"histogram-descr"}),e._v(" "),o("div",{staticClass:"histogram-container"},[o("histogram",{attrs:{"prices-from-parent":e.histogramPrices,"device-type":e.deviceType,"destination-code":e.destin.value.code,"origin-code":e.origin.value.code,promo:e.promoCodes,"trip-type":e.tripType,"num-adt":e.paxSelector.adults,"num-chd":e.paxSelector.children,"num-inf":e.paxSelector.infants,sref:"FSH","show-navigation":e.isDesktop,"disable-tooltip":!0,"show-legend":!0,"column-max-height-in-pixels":e.getHistogramSize,"is-group-booking":e.paxSelector.groupBooking,"group-booking-url":e.getGroupBookingUrl,"full-scroll":!0},on:{promoError:e.showPromoCodeBlock,histogramSearch:e.histogramSearch}})],1)])]):e._e()],1)}),[],!1,null,"12419422",null);t.default=S.exports}}]);
//# sourceMappingURL=FLT.js.map